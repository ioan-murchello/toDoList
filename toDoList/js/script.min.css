!function(){let e=[];e.length&&m(e);let t=!1,s=document.querySelector(".cards_list"),a=document.forms.taskform,l=a.elements.taskinput,c=a.elements.btn,i=document.querySelector(".completed_task"),n=document.querySelector(".all_task"),o=document.querySelector(".notcomplete_task");function d(e,t,s){e.classList.add("active_class"),t.classList.remove("active_class"),s.classList.remove("active_class")}function r(){let e,t=new Date,s=t.toTimeString().slice(0,5),a=t.toDateString().slice(0,17).split(" ").join(" / ");return e=s>"12:00"?`${a} / ${s} pm`:`${a} / ${s} am`,e}function m(e){s.innerHTML="",e.length>0&&e.forEach(((e,t)=>{s.append(function(e,t){let s=document.createElement("li");return 1==e.completed&&null!=e.completeTime?(s.classList.add("cards_item","completed"),s.addEventListener("click",u),s.setAttribute("data-task-id",t),s.innerHTML=`\n\n        <div class="text_block">\n        <p class="card_text">${e.title}</p>\n        <div class="data_wrapper">\n          <div class="create_data">Created: <span class="create_time">${e.created}</span></div>\n          <div class="create_data">Completed: <span class="complete_time">${e.completeTime}</span></div>\n        </div>\n\n        </div>\n        <div class="buttons_block">\n        <button class="delete_btn">Delete task</button>\n        <button class="complete_btn disable_btn_class" disabled>Task complete</button>\n        </div>\n  `,s):(s.classList.add("cards_item"),s.addEventListener("click",u),s.setAttribute("data-task-id",t),s.innerHTML=`\n        \n          <div class="text_block">\n          <p class="card_text">${e.title}</p>\n          <div class="data_wrapper">\n            <div class="create_data">Created: <span class="create_time">${e.created}</span></div>\n            <div class="create_data">Completed: <span class="complete_time"></span></div>\n          </div>\n\n          </div>\n          <div class="buttons_block">\n          <button class="delete_btn">Delete task</button>\n          <button class="complete_btn">Task complete</button>\n          </div>\n    `,s)}(e,t))}))}function p(e,t){0!=e&&t.remove()}function u(s){let a=s.target,l=a.closest("[data-task-id]"),c=l.getAttribute("data-task-id"),m=l.querySelector(".complete_btn"),u=l.querySelector(".delete_btn");if(0==k.checked&&a==m){e[c].completed=!0;let t=e[c].completeTime=r();m.setAttribute("data-disabled",!0),m.classList.add("disable_btn_class"),l.querySelector(".complete_time").textContent=t,localStorage.setItem("taski",JSON.stringify(e)),1==e[c].completed&&(l.classList.add("completed"),m.disabled="disabled",m.classList.add("disable_btn_class"),localStorage.setItem("taski",JSON.stringify(e)))}if(a==u&&0==k.checked&&(t=!0,l.style.transform="scale(0.95)",setTimeout((()=>{p(t,l),_(e,c),b(e,c)}),500),localStorage.setItem("taski",JSON.stringify(e))),o.classList.contains("active_class")&&a==m&&1==k.checked&&f(t,c,m,l),o.classList.contains("active_class")&&a==m&&0==k.checked){setTimeout((function(){d(o,n,i),y(),localStorage.setItem("taski",JSON.stringify(e))}),500),e[c].completed=!0;let t=e[c].completeTime=r();m.setAttribute("data-disabled",!0),m.classList.add("disable_btn_class"),l.querySelector(".complete_time").textContent=t,localStorage.setItem("taski",JSON.stringify(e)),1==e[c].completed&&(l.classList.add("completed"),m.disabled="disabled",m.classList.add("disable_btn_class"),localStorage.setItem("taski",JSON.stringify(e)))}a==u&&1==k.checked&&function(t,s,a){document.body.style.overflow="hidden";let l=document.querySelector(".popup_main_wrapper_delete");l.style.visibility="visible",l.style.opacity=1,l.addEventListener("click",(function(c){let i=c.target;(i.classList.contains("popup_close_btn_delete")||i.classList.contains("popup_main_wrapper_delete"))&&(l.style.visibility="hidden",l.style.opacity=0,document.body.style.overflow=""),i.classList.contains("popup_btn_okay")&&((t=!0)&&(s.style.transform="scale(0.95)",setTimeout((()=>{p(t,s),_(e,a),b(e,a)}),500),localStorage.setItem("taski",JSON.stringify(e))),l.style.visibility="hidden",l.style.opacity=0,document.body.style.overflow="")}))}(t,l,c),a==m&&1==k.checked&&f(t,c,m,l)}function _(e,t){return e.splice(t,1),localStorage.setItem("taski",JSON.stringify(e)),e}function b(e,t){let a=s.querySelectorAll(".cards_item");for(let s=0;s<=e.length;s++)for(let l in a){if(!a.length)return;a[l][t]!=e[s]&&(a[s][t]=e[l],a[s].setAttribute("data-task-id",s))}}function y(){document.querySelectorAll(".cards_item").forEach((e=>{e.classList.contains("completed")?(e.classList.add("hide"),e.classList.remove("show")):(e.classList.add("show"),e.classList.remove("hide"))}))}n.classList.add("active_class"),i.addEventListener("click",(()=>{d(i,n,o),document.querySelectorAll(".cards_item").forEach((e=>{e.classList.contains("completed")?(e.classList.add("show"),e.classList.remove("hide")):(e.classList.add("hide"),e.classList.remove("show"))}))})),n.addEventListener("click",(()=>{d(n,i,o),m(e)})),o.addEventListener("click",(()=>{d(o,n,i),y()})),c.addEventListener("click",(function(t){t.preventDefault(),d(n,i,o);let s=l.value.trim().replaceAll(/[<]/g,"&#60;");if(!s||""==s)return void alert("Please add a new task");let c=s;(function(t){let s={title:t,created:r(),completeTime:null,completed:!1};e.push(s),localStorage.setItem("taski",JSON.stringify(e)),m(e)})(c.replace(c[0],c[0].toUpperCase())),a.reset()})),localStorage.getItem("taski")&&(e=JSON.parse(localStorage.getItem("taski")),m(e)),s.addEventListener("click",(function(e){"li"==e.target&&u()}));let v=document.querySelector(".point"),L=v.querySelector(".pont"),k=document.querySelector(".inp");function f(t,s,a,l,c){document.body.style.overflow="hidden";let m=document.querySelector(".popup_main_wrapper");m.style.visibility="visible",m.style.opacity=1,m.addEventListener("click",(function(t){let c=t.target;if(c.classList.contains("popup_btn")){!0;{e[s].completed=!0;let t=e[s].completeTime=r();a.setAttribute("data-disabled",!0),a.classList.add("disable_btn_class"),l.querySelector(".complete_time").textContent=t,m.style.visibility="hidden",m.style.opacity=0,document.body.style.overflow="",localStorage.setItem("taski",JSON.stringify(e)),1==e[s].completed&&(l.classList.add("completed"),a.disabled="disabled",a.classList.add("disable_btn_class"),localStorage.setItem("taski",JSON.stringify(e)))}}c.classList.contains("popup_btn")&&o.classList.contains("active_class")&&1==k.checked&&(setTimeout((function(){d(o,n,i),y()}),500),localStorage.setItem("taski",JSON.stringify(e))),(c.classList.contains("popup_close_btn")||c.classList.contains("popup_main_wrapper"))&&(m.style.visibility="hidden",m.style.opacity=0,document.body.style.overflow="")}))}1==JSON.parse(localStorage.getItem("check"))?(k.checked=!0,v.classList.add("switcher_on"),L.classList.add("pont_change")):(v.classList.remove("switcher_on"),L.classList.remove("pont_change")),k.addEventListener("change",(function(){localStorage.setItem("check",k.checked),1==k.checked?(v.classList.add("switcher_on"),L.classList.add("pont_change")):(v.classList.remove("switcher_on"),L.classList.remove("pont_change"))}))}();