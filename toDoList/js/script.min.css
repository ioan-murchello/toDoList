!function(){let e=[];e.length&&r(e);let t=document.querySelector(".cards_list"),s=document.forms.taskform,a=s.elements.taskinput,l=s.elements.btn,c=document.querySelector(".completed_task"),i=document.querySelector(".all_task"),n=document.querySelector(".notcomplete_task");function o(e,t,s){e.classList.add("active_class"),t.classList.remove("active_class"),s.classList.remove("active_class")}function d(){let e=new Date,t=["Mo","Tu","We","Th","Fr","Sa","Su"][e.getDay()-1];null==t&&(t="Su");let s,a=e.getDate(),l=e.getMonth()+1,c=e.getFullYear(),i=e.getHours(),n=e.getMinutes();return s=i<12?`${t} ${a} / ${l} / ${c} ${i}:${n} am`:`${t} ${a} / ${l} / ${c} ${i}:${n} pm`,s}function r(e){t.innerHTML="",e.length>0&&e.forEach(((e,s)=>{t.append(function(e,t){let s=document.createElement("li");return 1==e.completed&&null!=e.completeTime?(s.classList.add("cards_item","completed"),s.addEventListener("click",m),s.setAttribute("data-task-id",t),s.innerHTML=`\n\n        <div class="text_block">\n        <p class="card_text">${e.title}</p>\n        <div class="data_wrapper">\n          <div class="create_data">Created: <span class="create_time">${e.created}</span></div>\n          <div class="create_data">Completed: <span class="complete_time">${e.completeTime}</span></div>\n        </div>\n\n        </div>\n        <div class="buttons_block">\n        <button class="delete_btn">Delete task</button>\n        <button class="complete_btn disable_btn_class" disabled>Task complete</button>\n        </div>\n  `,s):(s.classList.add("cards_item"),s.addEventListener("click",m),s.setAttribute("data-task-id",t),s.innerHTML=`\n        \n          <div class="text_block">\n          <p class="card_text">${e.title}</p>\n          <div class="data_wrapper">\n            <div class="create_data">Created: <span class="create_time">${e.created}</span></div>\n            <div class="create_data">Completed: <span class="complete_time"></span></div>\n          </div>\n\n          </div>\n          <div class="buttons_block">\n          <button class="delete_btn">Delete task</button>\n          <button class="complete_btn">Task complete</button>\n          </div>\n    `,s)}(e,s))}))}function m(s){let a=s.target,l=a.closest("[data-task-id]"),r=l.getAttribute("data-task-id"),m=l.querySelector(".complete_btn");if(a.classList.contains("delete_btn")){let s=confirm("You will delete this task?");if(!s)return;l.style.transform="scale(0.95)",setTimeout((()=>{!function(e,t){0!=e&&t.remove()}(s,l),function(e,t){e.splice(t,1),console.log(e),localStorage.setItem("taski",JSON.stringify(e))}(e,r),function(s,a){let l=t.querySelectorAll(".cards_item");for(let e=0;e<=s.length;e++)for(let t in l){if(!l.length)return;l[t][a]!=s[e]&&(l[t][a]=s[e],l[e].setAttribute("data-task-id",e))}console.log(e)}(e,r)}),500),localStorage.setItem("taski",JSON.stringify(e))}if(1==v.checked&&a.classList.contains("complete_btn"))!function(t,s,a,l){document.body.style.overflow="hidden";let r=document.querySelector(".popup_main_wrapper");r.style.visibility="visible",r.style.opacity=1,r.addEventListener("click",(function(m){let u=m.target;if(u.classList.contains("popup_btn")&&(t=!0)){e[s].completed=!0;let t=e[s].completeTime=d();a.setAttribute("data-disabled",!0),a.classList.add("disable_btn_class"),l.querySelector(".complete_time").textContent=t,r.style.visibility="hidden",r.style.opacity=0,document.body.style.overflow="",localStorage.setItem("taski",JSON.stringify(e)),1==e[s].completed&&(l.classList.add("completed"),a.disabled="disabled",a.classList.add("disable_btn_class"),localStorage.setItem("taski",JSON.stringify(e)))}(u.classList.contains("popup_close_btn")||u.classList.contains("popup_main_wrapper"))&&(r.style.visibility="hidden",r.style.opacity=0,document.body.style.overflow=""),n.classList.contains("active_class")&&1==t&&(o(c,i,n),p(),localStorage.setItem("taski",JSON.stringify(e)))}))}(false,r,m,l);else{e[r].completed=!0;let t=e[r].completeTime=d();m.setAttribute("data-disabled",!0),m.classList.add("disable_btn_class"),l.querySelector(".complete_time").textContent=t,localStorage.setItem("taski",JSON.stringify(e)),1==e[r].completed&&(l.classList.add("completed"),m.disabled="disabled",m.classList.add("disable_btn_class"),localStorage.setItem("taski",JSON.stringify(e)),o(c,i,n),p(),localStorage.setItem("taski",JSON.stringify(e)))}!n.classList.contains("active_class")||a.classList.contains("complete_btn")}function p(){document.querySelectorAll(".cards_item").forEach((e=>{e.classList.contains("completed")?(e.classList.add("show"),e.classList.remove("hide")):(e.classList.add("hide"),e.classList.remove("show"))}))}i.classList.add("active_class"),c.addEventListener("click",(()=>{o(c,i,n),p()})),i.addEventListener("click",(()=>{o(i,c,n),r(e)})),n.addEventListener("click",(()=>{o(n,i,c),document.querySelectorAll(".cards_item").forEach((e=>{e.classList.contains("completed")?(e.classList.add("hide"),e.classList.remove("show")):(e.classList.add("show"),e.classList.remove("hide"))}))})),l.addEventListener("click",(function(t){t.preventDefault(),o(i,c,n);let l=a.value.trim().replaceAll(/[<]/g,"&#60;");if(!l||""==l)return void alert("Please add a new task");let m=l;(function(t){let s={title:t,created:d(),completeTime:null,completed:!1};e.push(s),localStorage.setItem("taski",JSON.stringify(e)),r(e)})(m.replace(m[0],m[0].toUpperCase())),console.log(e),s.reset()})),localStorage.getItem("taski")&&(e=JSON.parse(localStorage.getItem("taski")),r(e)),t.addEventListener("click",(function(e){"li"==e.target&&m()}));let u=document.querySelector(".point"),_=u.querySelector(".pont"),v=document.querySelector(".inp");1==JSON.parse(localStorage.getItem("check"))?(v.checked=!0,u.classList.add("switcher_on"),_.classList.add("pont_change")):(u.classList.remove("switcher_on"),_.classList.remove("pont_change")),v.addEventListener("change",(function(){localStorage.setItem("check",v.checked),1==v.checked?(u.classList.add("switcher_on"),_.classList.add("pont_change")):(u.classList.remove("switcher_on"),_.classList.remove("pont_change")),console.log(v.checked)}))}();