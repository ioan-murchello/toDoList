!function(){let e=[];e.length&&m(e);let t=!1,s=document.querySelector(".cards_list"),a=document.forms.taskform,l=a.elements.taskinput,c=a.elements.btn,i=document.querySelector(".completed_task"),n=document.querySelector(".all_task"),o=document.querySelector(".notcomplete_task");function d(e,t,s){e.classList.add("active_class"),t.classList.remove("active_class"),s.classList.remove("active_class")}function r(){let e=new Date,t=["Mo","Tu","We","Th","Fr","Sa","Su"][e.getDay()-1];null==t&&(t="Su");let s,a=e.getDate(),l=e.getMonth()+1,c=e.getFullYear(),i=e.getHours(),n=e.getMinutes();return s=i<12?`${t} ${a} / ${l} / ${c} ${i}:${n} am`:`${t} ${a} / ${l} / ${c} ${i}:${n} pm`,s}function m(e){s.innerHTML="",e.length>0&&e.forEach(((e,t)=>{s.append(function(e,t){let s=document.createElement("li");return 1==e.completed&&null!=e.completeTime?(s.classList.add("cards_item","completed"),s.addEventListener("click",p),s.setAttribute("data-task-id",t),s.innerHTML=`\n\n        <div class="text_block">\n        <p class="card_text">${e.title}</p>\n        <div class="data_wrapper">\n          <div class="create_data">Created: <span class="create_time">${e.created}</span></div>\n          <div class="create_data">Completed: <span class="complete_time">${e.completeTime}</span></div>\n        </div>\n\n        </div>\n        <div class="buttons_block">\n        <button class="delete_btn">Delete task</button>\n        <button class="complete_btn disable_btn_class" disabled>Task complete</button>\n        </div>\n  `,s):(s.classList.add("cards_item"),s.addEventListener("click",p),s.setAttribute("data-task-id",t),s.innerHTML=`\n        \n          <div class="text_block">\n          <p class="card_text">${e.title}</p>\n          <div class="data_wrapper">\n            <div class="create_data">Created: <span class="create_time">${e.created}</span></div>\n            <div class="create_data">Completed: <span class="complete_time"></span></div>\n          </div>\n\n          </div>\n          <div class="buttons_block">\n          <button class="delete_btn">Delete task</button>\n          <button class="complete_btn">Task complete</button>\n          </div>\n    `,s)}(e,t))}))}function p(a){let l=a.target,c=l.closest("[data-task-id]"),m=c.getAttribute("data-task-id"),p=c.querySelector(".complete_btn");if(l.classList.contains("delete_btn")){let a=confirm("You will delete this task?");a&&(t=!1,c.style.transform="scale(0.95)",setTimeout((()=>{!function(e,t){0!=e&&t.remove()}(a,c),function(e,t){e.splice(t,1),console.log(e),localStorage.setItem("taski",JSON.stringify(e))}(e,m),function(t,a){let l=s.querySelectorAll(".cards_item");for(let e=0;e<=t.length;e++)for(let s in l){if(!l.length)return;l[s][a]!=t[e]&&(l[s][a]=t[e],l[e].setAttribute("data-task-id",e))}console.log(e)}(e,m)}),500),localStorage.setItem("taski",JSON.stringify(e)))}if(1==v.checked&&l.classList.contains("complete_btn")&&function(t,s,a,l){document.body.style.overflow="hidden";let c=document.querySelector(".popup_main_wrapper");c.style.visibility="visible",c.style.opacity=1,c.addEventListener("click",(function(m){let p=m.target;if(p.classList.contains("popup_btn")&&(t=!0)){e[s].completed=!0;let t=e[s].completeTime=r();a.setAttribute("data-disabled",!0),a.classList.add("disable_btn_class"),l.querySelector(".complete_time").textContent=t,c.style.visibility="hidden",c.style.opacity=0,document.body.style.overflow="",localStorage.setItem("taski",JSON.stringify(e)),1==e[s].completed&&(l.classList.add("completed"),a.disabled="disabled",a.classList.add("disable_btn_class"),localStorage.setItem("taski",JSON.stringify(e)))}(p.classList.contains("popup_close_btn")||p.classList.contains("popup_main_wrapper"))&&(c.style.visibility="hidden",c.style.opacity=0,document.body.style.overflow=""),o.classList.contains("active_class")&&1==t&&(d(i,n,o),u(),localStorage.setItem("taski",JSON.stringify(e)))}))}(t,m,p,c),0==v.checked&&l.classList.contains("complete_btn")&&(t=!0),1==t){e[m].completed=!0;let t=e[m].completeTime=r();p.setAttribute("data-disabled",!0),p.classList.add("disable_btn_class"),c.querySelector(".complete_time").textContent=t,localStorage.setItem("taski",JSON.stringify(e)),1==e[m].completed&&(c.classList.add("completed"),p.disabled="disabled",p.classList.add("disable_btn_class"),localStorage.setItem("taski",JSON.stringify(e)))}if(o.classList.contains("active_class")&&l.classList.contains("complete_btn")){if(!t)return;d(i,n,o),u(),localStorage.setItem("taski",JSON.stringify(e))}}function u(){document.querySelectorAll(".cards_item").forEach((e=>{e.classList.contains("completed")?(e.classList.add("show"),e.classList.remove("hide")):(e.classList.add("hide"),e.classList.remove("show"))}))}n.classList.add("active_class"),i.addEventListener("click",(()=>{d(i,n,o),u()})),n.addEventListener("click",(()=>{d(n,i,o),m(e)})),o.addEventListener("click",(()=>{d(o,n,i),document.querySelectorAll(".cards_item").forEach((e=>{e.classList.contains("completed")?(e.classList.add("hide"),e.classList.remove("show")):(e.classList.add("show"),e.classList.remove("hide"))}))})),c.addEventListener("click",(function(t){t.preventDefault(),d(n,i,o);let s=l.value.trim().replaceAll(/[<]/g,"&#60;");if(!s||""==s)return void alert("Please add a new task");let c=s;(function(t){let s={title:t,created:r(),completeTime:null,completed:!1};e.push(s),localStorage.setItem("taski",JSON.stringify(e)),m(e)})(c.replace(c[0],c[0].toUpperCase())),console.log(e),a.reset()})),localStorage.getItem("taski")&&(e=JSON.parse(localStorage.getItem("taski")),m(e)),s.addEventListener("click",(function(e){"li"==e.target&&p()}));let _=document.querySelector(".point"),b=_.querySelector(".pont"),v=document.querySelector(".inp");1==JSON.parse(localStorage.getItem("check"))?(v.checked=!0,_.classList.add("switcher_on"),b.classList.add("pont_change")):(_.classList.remove("switcher_on"),b.classList.remove("pont_change")),v.addEventListener("change",(function(){localStorage.setItem("check",v.checked),1==v.checked?(_.classList.add("switcher_on"),b.classList.add("pont_change")):(_.classList.remove("switcher_on"),b.classList.remove("pont_change")),console.log(v.checked)}))}();